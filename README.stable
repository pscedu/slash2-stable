05/11/2016
----------

If I turn on PICKLE_HAVE_FSANITIZE and do the following on an empty file

zhihui@yuzu: ~/projects-yuzu/slash2/msctl$ ./msctl -R repl-status  /zzh-slash2/zhihui/bbbb 

It crashes on the following line:

295         spinlock(&mrsq.mrsq_lock);
296         while (mrsq.mrsq_rc == 0) {
297                 psc_waitq_wait(&mrsq.mrsq_waitq, &mrsq.mrsq_lock);  <-- HERE
298                 spinlock(&mrsq.mrsq_lock);
299         }

This is not due to stack size. It is broken since v1.13.  Maybe it is due to the use of -R?

05/01/2016
----------

Pull in some thread code changes in an effort to reduce RSS.  Add sys.rss.  I 
did testing for a long time:

bash-4.2# msctl -p sys.uptime
parameter                                      value
================================================================================
sys.uptime                                     0d12h45m


04/25/2016
----------

Release 1.13.

04/18/2016
----------

I tried to use slash2-merge.sh to add mfio tree. The files end up at
the top directory.  I had to revert the merge with the following.

 $ git revert -m 1 dd73378cbcf888367c05ef891104ca6022a50efc
 $ git push

Then I use the steps in slash2-build.sh to re-do the merge.

04/12/2016
----------

Move v1.12 tag as follows:

	$ git tag -d v1.12
	$ git push --delete origin v1.12
	$ git tag -a v1.12 -m "Release 1.12"
	$ git push --tags

04/12/2016
----------

Release 1.12.  The highlights of this release are:

	* batch RPC rework
	* Client side RPC retry rework
	* ENOMEM fix for zfs-fuse on the MDS
	* Mininum space reservation on the IOS
	* Miscellaneous fixes and improvements.

03/18/2016
----------

Release 1.11.

03/16/2016
----------

All client RPCs are throttled. Fix a MDS crash, adjust timeout for bulk RPC, etc.

03/14/2016
----------

I did 5 hours of four way testing on a client before the following commit:

commit 0da7d49befa8fe89d4a36449fbea8eb6353208a5
Author: Jared Yanovich <jaredy@google.com>
Date:   Mon Mar 14 17:54:04 2016 -0400

    i think this might be the the elusive csvc ref leak

03/09/2016
----------

The default log level is currently broken.  Also I see "tar: Exiting with failure status due to 
previous errors" with tar-ssh over a large kernel build tree (with objects in it).  But this push 
contains a lease sequence number fix that should make the following test work much better:

	$ iozone -u 4 -l 1 -i 0 -i 1 -r 256 -s 10240000 -b result -e

I did pass the above test two in a row on my test fruits.

03/07/2016
----------

Release 1.10.

03/04/2016
----------

In addition to four-way four-hour test, I also replicate two slash2 source trees and build them at
the target IOS.

02/17/2016
----------

Release 1.09. Jared's test suite is code complete. A race condition in the name cache code is fixed.
The low water mark (minseq) issue after MDS restart is fixed. A workaround of ACL issue is in. Now 
a pool max of zero means infinity.  I will tag the commit with the following command:

	$ git tag -a v1.09 -m "Release 1.09"
	$ git push --tags

02/08/2016
----------

Release 1.08. Ajdust various pool sizes on MDS, sliod, and mount_slash. Adjust ZFS ARC size on slashd. I
use two clients, each of them runs my four-way multiple hour tests. I was able to remove 2+ million
files.

01/28/2016
----------

Release 1.07. This release contains a potential fix that solves the ZFS-fuse umem/vmem allocation
failure when we try to send a full snapshot on a MDS. Also, slash2.so is now compiled by default.

01/20/2016
----------

Release 1.06. The main motivation is to disable partial truncation completely before it
is ready.  Also pick up a fix in the flapping detector in pfl_daemon.sh and a potential
fix for live update with wokfs.

01/16/2016
----------

Release 1.05.  I was able to use wokfs to start a slash2 client.  However, live update
seems to have issues - don't use it at least for now. Here is how I used wokfs:

bash-4.2# SLASH_MDS_NID="orange@PSC1" PREF_IOS="lemon@PSC1" gdb mount_wokfs -q 
Reading symbols from /home/zhihui/projects-yuzu/wokfs/mount_wokfs/mount_wokfs...done.
(gdb) r -L "insert 0 /home/zhihui/projects-stable/slash2/mount_slash/slash2.so slcfg=/home/zhihui/two-ios.conf,datadir=/var/lib/slash2-zhihui" -U /zzh-slash2 2> log.txt

01/15/2016
----------

zhihui@yuzu: ~/projects-stable-yuzu-2016-01-15$ cat slash2/mk/local.mk 
SLASH_OPTIONS+=module

01/13/2016
----------

Release 1.04.  We update two slash2 system with this bits.

01/09/2016
----------

Release 1.03

I did eight hours of 4-way parallel tests over the span of two days.  This release includes
a test suite, two replication fixes, initial work on partial truncation, and other fixes.

12/19/2015
----------

I did two kernel 4.2 compile (make -j 3) in parallel without any problem:

real    218m55.008s
user    54m44.695s
sys     11m17.265s

12/12/2015
----------

Merge development git trees. Fix some minor journal issues and a MDS crash.  Now MDS can
create a default bmap on-disk table if it does not exist.
  
12/11/2015
----------

Command I use to compare the stable tree and the sum of development trees:

zhihui@yuzu: ~$ diff -dru -x .git projects-yuzu-2015-12-11/ projects-stable-yuzu-2015-12-11/
Only in projects-stable-yuzu-2015-12-11/: KNOWN-ISSUES.txt
Only in projects-stable-yuzu-2015-12-11/: README.stable
Only in projects-stable-yuzu-2015-12-11/: slash2-merge.sh
Only in projects-stable-yuzu-2015-12-11/: slash2-update.sh

12/07/2015
----------

Merge development git trees. The big feature included in this merge is continuous 
development.

11/09/2015
----------

The slash2-stable git tree is a merge of of the following five git trees:

	* https://github.com/pscedu/pfl
	* https://github.com/pscedu/slash2
	* https://github.com/pscedu/zfs-fuse
	* https://github.com/pscedu/sft
	* https://github.com/pscedu/distrib.fuse

Only the first three trees are essential for slash2 software.

The goals of this git tree are as follows:

	* Always keep a stable tree regardless of the code churn at 
          the developement trees.

	* Provide a history of stable slash2 bits that can be binary
          searched for regression.

All history are preserved. This tree can be tagged or branched if necessary.

The following commands can be used to pull commits from development trees:

$ git remote add pfl https://github.com/pscedu/pfl
$ git pull -X theirs --no-edit pfl master

$ git remote add slash2 https://github.com/pscedu/slash2
$ git pull -X subtree=slash2 --no-edit slash2 master

$ git remote add zfs-fuse https://github.com/pscedu/zfs-fuse
$ git pull -X subtree=zfs-fuse --no-edit zfs-fuse master


Note: Any change to this tree that does not meet the current stability test
      will be reverted UNCONDITIONALLY.

The current stability bar is defined as follows:

	- iozone -a
	- slash2 self build (wipe the tree after each build)
	- Linux kernel build
	- tar over ssh with a large directory

All the above tests are run in parallel for at least four hours without a glitch.
